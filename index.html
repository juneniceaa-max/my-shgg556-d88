<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASTRO LAB | æ˜Ÿå¯å®éªŒå®¤</title>
    <style>
        :root {
            --accent: #7d5fff;
            --text-glow: rgba(85, 239, 196, 0.6);
            --card-bg: rgba(255, 255, 255, 0.05);
        }

        body {
            margin: 0; min-height: 100vh;
            background: radial-gradient(circle at center, #1b2735 0%, #090a0f 100%);
            color: white; font-family: 'PingFang SC', system-ui, sans-serif;
            display: flex; justify-content: center; align-items: center;
            overflow-x: hidden; position: relative;
        }

        /* ğŸŒ  æµæ˜ŸèƒŒæ™¯å±‚ */
        .star-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none;
        }
        .shooting-star {
            position: absolute; width: 4px; height: 4px; background: #fff;
            border-radius: 50%; animation: animate 3s linear infinite;
        }
        .shooting-star::before {
            content: ''; position: absolute; top: 50%; transform: translateY(-50%);
            width: 300px; height: 1px; background: linear-gradient(90deg, #fff, transparent);
        }
        .shooting-star:nth-child(1) { top: 0; right: 0; animation-duration: 1.2s; }
        .shooting-star:nth-child(2) { top: 10%; right: 200px; animation-delay: 0.5s; animation-duration: 2.5s; }
        .shooting-star:nth-child(3) { top: 20%; right: 400px; animation-delay: 1s; animation-duration: 1.8s; }

        @keyframes animate {
            0% { transform: rotate(315deg) translateX(0); opacity: 1; }
            100% { transform: rotate(315deg) translateX(-1000px); opacity: 0; }
        }

        .container { width: 90%; max-width: 420px; z-index: 10; padding: 20px 0; }

        .glass-card { 
            background: var(--card-bg); backdrop-filter: blur(15px);
            border-radius: 28px; padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            margin-bottom: 20px;
        }

        h1 { text-align: center; letter-spacing: 6px; background: linear-gradient(to right, #a29bfe, #74b9ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        label { display: block; font-size: 13px; color: #888; margin: 15px 0 5px 5px; }
        input, select { width: 100%; padding: 16px; border-radius: 14px; background: rgba(0,0,0,0.4); border: 1px solid #333; color: white; box-sizing: border-box; outline: none; margin-bottom: 10px; }
        
        button.main-btn { width: 100%; padding: 18px; border-radius: 14px; border: none; background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button.main-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(108, 92, 231, 0.4); }

        .result-item { display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .val-text { color: #55efc4; font-weight: bold; text-shadow: 0 0 10px var(--text-glow); }

        /* ğŸš© å¯¼èˆªæŒ‰é’®æ ·å¼ */
        .nav-grid { display: none; grid-template-columns: 1fr; gap: 10px; margin-top: 10px; }
        .nav-btn { padding: 15px; border-radius: 12px; border: none; color: white; font-weight: bold; cursor: pointer; transition: 0.2s; font-size: 14px; }
    </style>
</head>
<body>

    <div class="star-container">
        <div class="shooting-star"></div>
        <div class="shooting-star"></div>
        <div class="shooting-star"></div>
    </div>

    <div class="container">
        <h1>ASTRO LAB</h1>
        
        <div id="inputCard" class="glass-card">
            <label>ğŸ•°ï¸ å‡ºç”Ÿå‡†ç¡®æ—¶åˆ»</label>
            <input type="datetime-local" id="birthTime" value="1995-10-24T12:00">
            
            <label>ğŸ“ åœ°ç†æ–¹ä½</label>
            <select id="location">
                <option value="116.4">åŒ—äº¬</option>
                <option value="121.4">ä¸Šæµ·</option>
                <option value="113.2">å¹¿å·</option>
                <option value="104.0">æˆéƒ½</option>
            </select>
            
            <button class="main-btn" onclick="runCalculation()">å¼€å¯çµé­‚æŒ‡å¼•</button>
        </div>

        <div id="resultArea" class="glass-card" style="display: none;">
            <div class="result-item"><span>â˜€ï¸ å¤ªé˜³æ˜Ÿåº§</span><span class="val-text" id="sun"></span></div>
            <div class="result-item"><span>ğŸŒ™ æœˆäº®æ˜Ÿåº§</span><span class="val-text" id="moon"></span></div>
            <div class="result-item"><span>â¬†ï¸ ä¸Šå‡æ˜Ÿåº§</span><span class="val-text" id="asc"></span></div>
            <div id="report" style="margin-top:20px; font-size:14px; color:#ccc; line-height:1.6;"></div>
        </div>

        <div id="navGroup" class="nav-grid">
            <button class="nav-btn" style="background:linear-gradient(135deg, #ff7675, #fab1a0);" onclick="navigateTo('daily.html')">ğŸ“… ä»Šæ—¥/æ˜æ—¥è¿åŠ¿</button>
            <button class="nav-btn" onclick="navigateTo('weekly.html')" style="background: #fab1a0;">ğŸ“… æœ¬å‘¨è¿åŠ¿æŒ‡å¼•</button>
            <button class="nav-btn" onclick="navigateTo('monthly.html')" style="background: #81ecec;">ğŸŒ™ æœ¬æœˆæ·±åº¦èƒ½é‡</button>
            <button class="nav-btn" style="background:linear-gradient(135deg, #74b9ff, #81ecec);" onclick="navigateTo('yearly.html')">ğŸ“ˆ 2026 å¹´åº¦è¿åŠ¿</button>
            <button class="nav-btn" style="background:linear-gradient(135deg, #a29bfe, #6c5ce7);" onclick="navigateTo('matrix.html')">ğŸ”® å‘½ç†è·¨ç•Œè”åŠ¨</button>
        </div>
</button>
        </div>
    </div>

    <script>
       // ğŸš© æ–°å¢ï¼šé¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥
window.onload = function() {
    if (localStorage.getItem('userAstro')) {
        showResultDirectly();
    }
};

function runCalculation() {
    const timeVal = document.getElementById('birthTime').value;
    const lng = parseFloat(document.getElementById('location').value);
    if (!timeVal) return;

    const time = new Date(timeVal);
    const signs = ["ç™½ç¾Š", "é‡‘ç‰›", "åŒå­", "å·¨èŸ¹", "ç‹®å­", "å¤„å¥³", "å¤©ç§¤", "å¤©è", "å°„æ‰‹", "æ‘©ç¾¯", "æ°´ç“¶", "åŒé±¼"];

    const dayOfYear = (time - new Date(time.getFullYear(), 0, 0)) / 86400000;
    const hour = time.getHours() + time.getMinutes() / 60;
    const sunIdx = Math.floor(((dayOfYear + 284) % 365 / 365) * 12);
    const moonIdx = Math.floor((dayOfYear * 13.18 + 5) % 12);
    const ascIdx = Math.floor((sunIdx + (hour - 12) / 2 + (lng - 120) / 15 + 12) % 12);

    const userAstro = { sun: signs[sunIdx], moon: signs[moonIdx], asc: signs[ascIdx] };
    localStorage.setItem('userAstro', JSON.stringify(userAstro));

    showResultDirectly(); // è°ƒç”¨æ˜¾ç¤ºé€»è¾‘
}

// ğŸš© æ–°å¢ï¼šæ ¸å¿ƒè·³è½¬é€»è¾‘
function showResultDirectly() {
    const data = JSON.parse(localStorage.getItem('userAstro'));
    
    // 1. éšè—è¾“å…¥è¡¨å•
    document.getElementById('inputCard').style.display = 'none';
    
    // 2. å¡«å……å¹¶æ˜¾ç¤ºç»“æœåŒºåŸŸ
    document.getElementById('resultArea').style.display = 'block';
    document.getElementById('sun').innerText = data.sun + "åº§";
    document.getElementById('moon').innerText = data.moon + "åº§";
    document.getElementById('asc').innerText = data.asc + "åº§";
    document.getElementById('report').innerHTML = `âœ¨ æ¬¢è¿å›æ¥ã€‚ä½ çš„çµé­‚æ ¸å¿ƒç”±<b>${data.sun}åº§</b>é©±åŠ¨ï¼Œæ˜Ÿè·¯å·²ä¸ºä½ é“ºå°±ã€‚`;

    // 3. æ˜¾ç¤ºä¸‰ä¸ªå¯¼èˆªæŒ‰é’®
    document.getElementById('navGroup').style.display = 'grid';
    
    // 4. (å¯é€‰) å¢åŠ ä¸€ä¸ªâ€œé‡ç½®ä¿¡æ¯â€çš„å°æŒ‰é’®ï¼Œæ–¹ä¾¿ç”¨æˆ·æƒ³æ¢ä¸ªæ—¶é—´æµ‹
    if (!document.getElementById('resetBtn')) {
        const resetBtn = document.createElement('div');
        resetBtn.id = 'resetBtn';
        resetBtn.innerHTML = `<p style="text-align:center; font-size:12px; color:#555; cursor:pointer; margin-top:20px;" onclick="clearData()">é‡æ–°è¾“å…¥å‡ºç”Ÿä¿¡æ¯</p>`;
        document.querySelector('.container').appendChild(resetBtn);
    }
}

// ğŸš© æ–°å¢ï¼šæ¸…é™¤æ•°æ®å‡½æ•°
function clearData() {
    localStorage.removeItem('userAstro');
    location.reload(); // åˆ·æ–°é¡µé¢ï¼Œè¡¨å•å°±ä¼šå›æ¥äº†
}

function navigateTo(url) {
    window.location.href = url;
}
    </script>
</body>
</html>