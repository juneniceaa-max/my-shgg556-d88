<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜çº§æ˜Ÿç›˜åŠ©æ‰‹ V2.0</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; line-height: 1.6; background-color: #0f0c29; color: #fff; }
        .container { max-width: 600px; margin: auto; }
        .card { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); padding: 25px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 20px; }
        input, select, button { padding: 12px; margin: 10px 0; width: 100%; border-radius: 10px; border: none; font-size: 16px; }
        button { background: linear-gradient(45deg, #6a11cb 0%, #2575fc 100%); color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { transform: scale(1.02); }
        .result-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        h1 { text-align: center; color: #e0c3fc; text-shadow: 0 0 10px rgba(157, 78, 221, 0.5); }
        .fortune-text { font-style: italic; color: #ff9a9e; padding: 15px; border-left: 3px solid #ff9a9e; background: rgba(255,154,158,0.1); }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŒ æ·±åº¦æ˜Ÿç›˜åˆ†æ</h1>
        <div class="card">
            <label>ğŸ•°ï¸ å‡ºç”Ÿå‡†ç¡®æ—¶é—´ï¼š</label>
            <input type="datetime-local" id="birthTime" value="1995-01-01T12:00">
            
            <label>ğŸ“ å‡ºç”ŸåŸå¸‚ï¼š</label>
            <select id="citySelect" onchange="updateLng()">
                <option value="116.4">åŒ—äº¬ (116.4E)</option>
                <option value="121.4">ä¸Šæµ· (121.4E)</option>
                <option value="113.2">å¹¿å· (113.2E)</option>
                <option value="114.0">æ·±åœ³ (114.0E)</option>
                <option value="104.0">æˆéƒ½ (104.0E)</option>
                <option value="120.1">æ­å· (120.1E)</option>
            </select>
            <input type="hidden" id="lng" value="116.4">
            
            <button onclick="calculateDeepAstro()">å¼€å¯çµé­‚æŒ‡å¼•</button>
        </div>

        <div id="result" class="card" style="display:none;">
            <div class="result-item"><span>â˜€ï¸ å¤ªé˜³æ˜Ÿåº§ (æ€§æ ¼æ ¸å¿ƒ)</span> <b id="sunSign"></b></div>
            <div class="result-item"><span>ğŸŒ™ æœˆäº®æ˜Ÿåº§ (å†…åœ¨æƒ…æ„Ÿ)</span> <b id="moonSign"></b></div>
            <div class="result-item"><span>ğŸ’– é‡‘æ˜Ÿç¬¦å· (æ‹çˆ±è§‚)</span> <b id="venusSign"></b></div>
            <div class="result-item"><span>â¬†ï¸ ä¸Šå‡æ˜Ÿåº§ (å¤–åœ¨é¢å…·)</span> <b id="ascSign"></b></div>
            <div class="fortune-text" id="deepFortune"></div>
        </div>
    </div>

    <script>
        function updateLng() {
            document.getElementById('lng').value = document.getElementById('citySelect').value;
        }

        function calculateDeepAstro() {
            const timeValue = document.getElementById('birthTime').value;
            const lng = parseFloat(document.getElementById('lng').value);
            const date = new Date(timeValue);
            const signs = ["ç™½ç¾Š", "é‡‘ç‰›", "åŒå­", "å·¨èŸ¹", "ç‹®å­", "å¤„å¥³", "å¤©ç§¤", "å¤©è", "å°„æ‰‹", "æ‘©ç¾¯", "æ°´ç“¶", "åŒé±¼"];
            
            // å¢å¼ºç‰ˆæ¨¡æ‹Ÿç®—æ³•
            const dayOfYear = (date - new Date(date.getFullYear(), 0, 0)) / 86400000;
            const hours = date.getHours() + date.getMinutes() / 60;
            
            // 1. å¤ªé˜³
            const sunIdx = Math.floor(((dayOfYear + 284) % 365 / 365) * 12);
            // 2. ä¸Šå‡ (å—å‡ºç”Ÿæ—¶é—´å’Œåœ°ç†ç»åº¦å½±å“)
            const ascIdx = Math.floor((sunIdx + (hours - 12) / 2 + (lng - 120) / 15 + 12) % 12);
            // 3. æœˆäº® (æœˆäº®è¿è¡Œæå¿«ï¼Œçº¦2.5å¤©è¿‡ä¸€å®«)
            const moonIdx = Math.floor((dayOfYear * 13.17 / 30 + 5) % 12);
            // 4. é‡‘æ˜Ÿ
            const venusIdx = (sunIdx + 1) % 12;

            document.getElementById('result').style.display = 'block';
            document.getElementById('sunSign').innerText = signs[sunIdx] + "åº§";
            document.getElementById('ascSign').innerText = signs[ascIdx] + "åº§";
            document.getElementById('moonSign').innerText = signs[moonIdx] + "åº§";
            document.getElementById('venusSign').innerText = signs[venusIdx] + "åº§";

            const reports = [
                "è¿‘æœŸç¾¤æ˜Ÿæ±‡èšï¼Œä½ çš„ç›´è§‰æå¼ºï¼Œé€‚åˆå¤„ç†ç§¯å‹å·²ä¹…çš„æƒ…ç»ªé—®é¢˜ã€‚",
                "ç«æ˜Ÿä¸ºä½ æ³¨å…¥èƒ½é‡ï¼Œä»Šæ—¥é€‚åˆå¼€å¯å¥èº«è®¡åˆ’æˆ–è¿›è¡Œå•†åŠ¡è°ˆåˆ¤ã€‚",
                "æœˆäº®è¿›å…¥æ¸©æŸ”ç›¸ä½ï¼Œä»Šæ™šé€‚åˆç‹¬å¤„ï¼Œäº«å—ä¸€æ®µé™è°§çš„é˜…è¯»æ—¶é—´ã€‚",
                "æ°´æ˜Ÿç›¸ä½è‰¯å¥½ï¼Œä½ çš„æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›å¤„äºå·…å³°ï¼Œåˆ©äºé¢è¯•æˆ–å†™ä½œã€‚"
            ];
            document.getElementById('deepFortune').innerText = "ğŸ”® æ˜Ÿè±¡å¯ç¤ºï¼š" + reports[date.getDay() % 4];
        }
    </script>
</body>
</html>