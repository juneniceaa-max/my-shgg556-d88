<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æœˆåº¦æ·±åº¦æ¨æ¼” | ASTRO LAB</title>
    <style>
        :root {
            --bg: #0c0d12;
            --accent: #81ecec;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-dim: #888;
        }

        body { margin: 0; background: var(--bg); color: white; font-family: -apple-system, system-ui, sans-serif; padding-bottom: 60px; overflow-x: hidden; }
        .container { width: 90%; max-width: 420px; margin: 0 auto; padding-top: 20px; }
        .back-link { color: var(--text-dim); text-decoration: none; font-size: 14px; display: block; margin-bottom: 10px; }

        /* æœˆä»½å¤´éƒ¨ */
        .month-header { text-align: center; margin: 20px 0; }
        .month-circle {
            width: 65px; height: 65px; border-radius: 50%; border: 2px solid var(--accent);
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; font-weight: bold; margin: 0 auto 10px;
            box-shadow: 0 0 15px rgba(129, 236, 236, 0.2); background: rgba(129, 236, 236, 0.05);
        }

        .glass-card {
            background: var(--card-bg); border-radius: 20px; padding: 18px;
            border: 1px solid rgba(255, 255, 255, 0.08); margin-bottom: 15px;
        }

        .theme-title { font-size: 17px; color: var(--accent); font-weight: bold; margin-bottom: 8px; display: block; }
        .theme-desc { font-size: 13px; line-height: 1.6; color: #ccc; }

        .lucky-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .lucky-box {
            background: rgba(255,255,255,0.03); border-radius: 15px; padding: 12px 5px;
            text-align: center; border: 1px solid rgba(255,255,255,0.05);
        }
        .lucky-label { font-size: 10px; color: var(--text-dim); display: block; margin-bottom: 6px; }
        .lucky-val { font-size: 12px; font-weight: bold; color: #fff; }

        /* --- åŠ¨ç”»ä¼˜åŒ–ï¼šèƒ½é‡å›¾ --- */
        .chart-label { font-size: 12px; color: var(--text-dim); margin: 20px 0 10px 5px; display: block; }
        .energy-chart { display: flex; align-items: flex-end; justify-content: space-between; height: 60px; padding: 0 10px; }
        
        .energy-pillar { 
            width: 12px; 
            background: linear-gradient(to top, var(--accent), #55efc4); 
            border-radius: 3px 3px 0 0; 
            /* åˆå§‹é«˜åº¦ä¸º0ï¼Œé€šè¿‡åŠ¨ç”»å‡èµ· */
            height: 0;
            animation: growUp 1.2s cubic-bezier(0.17, 0.67, 0.83, 0.67) forwards;
        }

        @keyframes growUp {
            from { height: 0; }
            to { height: var(--target-h); }
        }

        .insight-box {
            background: linear-gradient(135deg, rgba(129, 236, 236, 0.1), rgba(162, 155, 254, 0.1));
            border-radius: 18px; padding: 15px; border-left: 3px solid var(--accent); margin-top: 10px;
        }
        .insight-title { font-size: 13px; font-weight: bold; color: var(--accent); margin-bottom: 6px; }
        .insight-text { font-size: 13px; color: #aaa; line-height: 1.5; font-style: italic; }

        /* --- æ ·å¼ä¼˜åŒ–ï¼šæ ¼è¨€åŒº --- */
        .motto-container { 
            margin-top: 50px; 
            text-align: center; 
            padding: 30px 20px;
            background: radial-gradient(circle at center, rgba(129, 236, 236, 0.05) 0%, transparent 70%);
            border-radius: 30px;
        }
        .motto-line { width: 30px; height: 1.5px; background: var(--accent); margin: 0 auto 20px; opacity: 0.4; }
        #mbtiMotto { 
            font-size: 16px; 
            color: #fff; 
            line-height: 1.8; 
            letter-spacing: 1px; 
            font-weight: 300;
        }
        #mbtiMotto span { color: var(--accent); margin: 0 5px; font-family: serif; font-size: 20px; }
        .motto-footer { font-size: 10px; color: #444; letter-spacing: 4px; text-transform: uppercase; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="container">
        <a href="index.html" class="back-link">â† è¿”å›å®éªŒå®¤</a>
        
        <div class="month-header">
            <div class="month-circle" id="monthCircle">--</div>
            <div style="font-size: 18px; letter-spacing: 2px; font-weight: bold;">æœˆåº¦æ·±åº¦æ¨æ¼”</div>
        </div>

        <div class="glass-card">
            <span class="theme-title" id="monthTheme">æ­£åœ¨åŒæ­¥æœˆç›¸...</span>
            <div class="theme-desc" id="monthContent">...</div>
        </div>

        <div class="lucky-row">
            <div class="lucky-box"><span class="lucky-label">ğŸŒˆ å¹¸è¿è‰²</span><span class="lucky-val" id="luckyColor">--</span></div>
            <div class="lucky-box"><span class="lucky-label">ğŸ¾ å¹¸è¿åŠ¨ç‰©</span><span class="lucky-val" id="luckyAnimal">--</span></div>
            <div class="lucky-box"><span class="lucky-label">ğŸ”¢ å¹¸è¿æ•°å­—</span><span class="lucky-val" id="luckyNum">--</span></div>
        </div>

        <span class="chart-label">ğŸ“Š æœ¬æœˆèƒ½é‡æµå‘ (åŸºäºæ€§æ ¼æ¨¡å‹)</span>
        <div class="glass-card">
            <div class="energy-chart" id="energyChart"></div>
            <div style="display: flex; justify-content: space-between; font-size: 10px; color: #444; margin-top: 12px; padding: 0 5px;">
                <span>æœˆåˆ</span><span>æœˆä¸­</span><span>æœˆæœ«</span>
            </div>
        </div>

        <div class="insight-box">
            <div class="insight-title">âœ¨ çµæ„ŸæŒ‡å¼•</div>
            <div class="insight-text" id="randomInsight">...</div>
        </div>

        <div class="motto-container">
            <div class="motto-line"></div>
            <div id="mbtiMotto"></div>
            <div class="motto-footer">Astro Lab Â· 2026</div>
        </div>
    </div>

    <script>
        window.onload = function() {
            const now = new Date();
            const month = now.getMonth() + 1;
            const storageData = JSON.parse(localStorage.getItem('userAstro')) || {};
            const mbti = storageData.mbti || "INTJ";

            document.getElementById('monthCircle').innerText = month + "æœˆ";

            // åŸºç¡€ä¿¡æ¯
            const themes = ["æ½œé¾™å‹¿ç”¨", "åˆ©è§å¤§äºº", "æ˜¥æš–èŠ±å¼€", "æœ¨ç§€äºæ—", "çƒˆæ—¥å½“ç©º", "é¢—ç²’å½’ä»“", "é¡ºé£é¡ºæ°´", "ç§‹é«˜æ°”çˆ½", "å®é™è‡´è¿œ", "æ‹¨äº‘è§æ—¥", "ç‘é›ªä¸°å¹´", "å²æœ«åœ†æ»¡"];
            const colors = [{n:"å†°æ™¶è“",h:"#a2e4f3"}, {n:"æ¨±èŠ±ç²‰",h:"#ffb7c5"}, {n:"è–„è·ç»¿",h:"#55efc4"}, {n:"ç¥ç€é»„",h:"#ffeaa7"}];
            const animals = ["åŒ—æç†Š", "æ¢…èŠ±é¹¿", "çµçŒ«", "æµ·è±š", "ç‹¬è§’å…½", "ç™½é¹¤"];

            document.getElementById('monthTheme').innerText = "æœ¬æœˆä¸»é¢˜ï¼š" + themes[month - 1];
            document.getElementById('monthContent').innerText = `å—${month}æœˆæ˜Ÿè±¡å˜åŠ¨å½±å“ï¼Œä½ çš„èƒ½é‡åœºæ­£å¤„äºå¹³ç¨³è¿‡æ¸¡æœŸï¼Œé€‚åˆè¿›è¡Œå†…åœ¨æ¢ç´¢ã€‚`;
            
            const colorObj = colors[month % colors.length];
            document.getElementById('luckyColor').innerHTML = `<span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:${colorObj.h};margin-right:4px;"></span>${colorObj.n}`;
            document.getElementById('luckyAnimal').innerText = animals[month % animals.length];
            document.getElementById('luckyNum').innerText = (month * 7) % 10 + 1;

            const insights = ["å½“ä½ åœæ­¢å‘å¤–å¯»æ±‚è®¤å¯ï¼ŒçœŸæ­£çš„åŠ›é‡å°±ä¼šä»å†…å¿ƒå‡èµ·ã€‚", "ä¿æŒä¼˜é›…çš„èŠ‚å¥ï¼Œä¸è¦è¢«å¤–ç•Œçš„å–§åš£æ‰“ä¹±å¿ƒè·³ã€‚", "å®‡å®™æ­£åœ¨ä¸ºä½ æ¸…ç†ä¸å†éœ€è¦çš„æ—§èƒ½é‡ã€‚"];
            document.getElementById('randomInsight').innerText = insights[month % insights.length];

            // --- é€»è¾‘ä¼˜åŒ–ï¼šå¸¦å»¶è¿ŸåŠ¨ç”»çš„èƒ½é‡å›¾ ---
            const isExtrovert = mbti.startsWith('E');
            const volatility = isExtrovert ? 45 : 18; 
            const baseHeight = isExtrovert ? 12 : 32;
            let chartHtml = '';
            for(let i=0; i<15; i++) {
                const h = baseHeight + (Math.random() * volatility);
                // ä½¿ç”¨ CSS å˜é‡æ§åˆ¶ç›®æ ‡é«˜åº¦ï¼Œå¹¶å¢åŠ åŠ¨ç”»å»¶è¿Ÿ
                chartHtml += `<div class="energy-pillar" style="--target-h:${h}px; opacity:${0.3 + (h/100)}; animation-delay: ${i * 0.05}s"></div>`;
            }
            document.getElementById('energyChart').innerHTML = chartHtml;

            // --- é€»è¾‘ä¼˜åŒ–ï¼šå¸¦å¼•å·ä¿®é¥°çš„æ ¼è¨€ ---
            const mottoPool = {
                "INTJ": "åœ¨æ·±é‚ƒçš„å­¤ç‹¬ä¸­ï¼Œé‡æ„å±äºä½ çš„ç§©åº",
                "ENFP": "è·¨è¶Šå¹³åº¸çš„è¾¹ç•Œï¼Œæ‹¥æŠ±çµé­‚çš„ä¸‡è±¡",
                "INFJ": "äºæ— å£°å¤„å¬æƒŠé›·ï¼Œäºå¹³å‡¡ä¸­è§ä¼—ç”Ÿ",
                "ISTJ": "ç§©åºæ˜¯æ˜Ÿè¾°çš„è½¨è¿¹ï¼ŒæŒ‡å¼•æŠµè¾¾å½¼å²¸",
                "DEFAULT": "é¡ºåº”æ—¶é—´çš„çº¹ç†ï¼Œä¸‡ç‰©çš†æœ‰å…¶æ—¶"
            };
            const rawMotto = mottoPool[mbti] || mottoPool["DEFAULT"];
            document.getElementById('mbtiMotto').innerHTML = `<span>ã€Œ</span>${rawMotto}<span>ã€</span>`;
        };
    </script>
</body>
</html>